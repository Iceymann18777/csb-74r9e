(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{1225:function(t,n,e){var content=e(1361);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,e(22).default)("b3a7799e",content,!0,{sourceMap:!1})},1226:function(t,n,e){var content=e(1363);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,e(22).default)("047ccd1d",content,!0,{sourceMap:!1})},1360:function(t,n,e){"use strict";e(1225)},1361:function(t,n,e){var o=e(21)(!1);o.push([t.i,".container[data-v-9476a1f8]{max-width:450px}.container h6[data-v-9476a1f8]{margin-bottom:0}.container .action[data-v-9476a1f8]{display:grid;grid-gap:4px}",""]),t.exports=o},1362:function(t,n,e){"use strict";e(1226)},1363:function(t,n,e){var o=e(21)(!1);o.push([t.i,".ant-steps-item-content{width:auto!important}.ant-steps-item-title{color:#f1f1f2!important}.ant-steps-item-description{color:#85858d!important}",""]),t.exports=o},1411:function(t,n,e){"use strict";e.r(n);e(59),e(46),e(66),e(52),e(78);var o=e(35),r=e(28),c=(e(132),e(72)),l=e.n(c),d=(e(1223),e(1224)),f=e.n(d),m=(e(198),e(26),e(114),e(77),e(617),e(53),e(37),e(621),e(9)),v=e(70),h=e(1169),k=e(50),y=e(8),_=(e(34),e(3)),w=e(14),A=e(141);function S(){return(S=Object(y.a)(regeneratorRuntime.mark((function t(n,e,o){var r,c,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n&&e){t.next=2;break}throw new Error("Miss connection");case 2:if(o){t.next=4;break}throw new Error("Miss pool infomations");case 4:return r=new _.Transaction,c=[],l=e.publicKey,o.forEach(function(){var t=Object(y.a)(regeneratorRuntime.mark((function t(o){var d,f,m,v,h,k,y;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(d=o.farmInfo,f=o.lpAccount,m=o.rewardAccount,v=o.infoAccount,h=o.amount,d){t.next=3;break}throw new Error("Miss pool infomations");case 3:if(f&&v){t.next=5;break}throw new Error("Miss account infomations");case 5:if(h){t.next=7;break}throw new Error("Miss amount infomations");case 7:return t.next=9,Object(w.g)(n,m,l,d.reward.mintAddress,null,r,c);case 9:k=t.sent,y=new _.PublicKey(d.programId),r.add(Object(A.h)(y,new _.PublicKey(d.poolId),new _.PublicKey(d.poolAuthority),new _.PublicKey(v),e.publicKey,new _.PublicKey(f),new _.PublicKey(d.poolLpTokenAccount),k,new _.PublicKey(d.poolRewardTokenAccount),h.wei.toNumber()));case 12:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}()),t.next=10,Object(w.n)(n,e,r,c);case 10:return t.abrupt("return",t.sent);case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var O=e(1190),T=e(1),U=e(99),D=e(105);function j(object,t){var n=Object.keys(object);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(object);t&&(e=e.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),n.push.apply(n,e)}return n}var C=f.a.Step,$=m.default.extend({components:{Button:l.a,Steps:f.a,Step:C},data:function(){return{TOKENS:T.c,farms:[],liquids:[],creating:!1,unstaking:!1,removing:!1,unwraping:!1}},head:{title:"Raydium Migrate"},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?j(Object(source),!0).forEach((function(n){Object(r.a)(t,n,source[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):j(Object(source)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(source,n))}))}return t}({},Object(v.e)(["wallet","liquidity","farm","url"])),watch:{"farm.stakeAccounts":{handler:function(){this.updateFarms()},deep:!0},"wallet.tokenAccounts":{handler:function(){this.updateLiquids()},deep:!0}},mounted:function(){this.updateFarms(),this.updateLiquids()},methods:{get:h.a,updateFarms:function(){for(var t=[],n=0,e=Object.entries(this.farm.infos);n<e.length;n++){var r=Object(o.a)(e[n],2),c=r[0],l=r[1];if(!l.isStake){var d=Object(h.a)(this.farm.stakeAccounts,c);if(d){var f=(d=Object(k.a)(d)).depositBalance;f.isNullOrZero()||t.push({farmInfo:l,depositBalance:f})}}}this.farms=t},createUsdtAccount:function(){var t=this;this.creating=!0;var n=this.$web3,e=this.$wallet,o=Object(D.a)().toString();this.$notify.info({key:o,message:"Making transaction...",description:"",duration:0}),Object(O.b)(n,e,T.c.USDT.mintAddress).then((function(n){t.$notify.info({key:o,message:"Transaction has been sent",description:function(e){return e("div",["Confirmation is in progress.  Check your transaction on ",e("a",{attrs:{href:"".concat(t.url.explorer,"/tx/").concat(n),target:"_blank"}},"here")])}});t.$accessor.transaction.sub({txid:n,description:"Create USDT account"})})).catch((function(n){t.$notify.error({key:o,message:"Create USDT account failed",description:n.message})})).finally((function(){t.creating=!1}))},unstakeWUSDT:function(t,n){var e=this;this.unstaking=!0;var o=this.$web3,r=this.$wallet,c=Object(h.a)(this.wallet.tokenAccounts,"".concat(t.lp.mintAddress,".tokenAccountAddress")),l=Object(h.a)(this.wallet.tokenAccounts,"".concat(t.reward.mintAddress,".tokenAccountAddress")),d=Object(h.a)(this.farm.stakeAccounts,"".concat(t.poolId,".stakeAccountAddress")),f=Object(D.a)().toString();this.$notify.info({key:f,message:"Making transaction...",description:"",duration:0}),Object(A.g)(o,r,t,c,l,d,n).then((function(o){e.$notify.info({key:f,message:"Transaction has been sent",description:function(t){return t("div",["Confirmation is in progress.  Check your transaction on ",t("a",{attrs:{href:"".concat(e.url.explorer,"/tx/").concat(o),target:"_blank"}},"here")])}});var r="Unstake ".concat(n," ").concat(t.lp.name);e.$accessor.transaction.sub({txid:o,description:r})})).catch((function(t){e.$notify.error({key:f,message:"Stake failed",description:t.message})})).finally((function(){e.unstaking=!1}))},unwrapWUSDT:function(t){var n=this;this.unwraping=!0;var e=this.$web3,o=this.$wallet,r=Object(h.a)(this.wallet.tokenAccounts,"".concat(T.c.WUSDT.mintAddress,".tokenAccountAddress")),c=Object(h.a)(this.wallet.tokenAccounts,"".concat(T.c.USDT.mintAddress,".tokenAccountAddress")),l=Object(D.a)().toString();this.$notify.info({key:l,message:"Making transaction...",description:"",duration:0}),Object(O.i)(this.$axios,e,o,T.c.WUSDT.mintAddress,T.c.USDT.mintAddress,r,c,t).then((function(e){n.$notify.info({key:l,message:"Transaction has been sent",description:function(t){return t("div",["Confirmation is in progress.  Check your transaction on ",t("a",{attrs:{href:"".concat(n.url.explorer,"/tx/").concat(e),target:"_blank"}},"here")])}});var o="Unwrap ".concat(t," WUSDT");n.$accessor.transaction.sub({txid:e,description:o})})).catch((function(t){n.$notify.error({key:l,message:"Unwrap failed",description:t.message})})).finally((function(){n.unwraping=!1}))},unstake:function(){var t=this;this.unstaking=!0;var n=this.$web3,e=this.$wallet,o=[];this.farms.forEach((function(n){var e=n.farmInfo,r=n.depositBalance,c=Object(h.a)(t.wallet.tokenAccounts,"".concat(e.lp.mintAddress,".tokenAccountAddress")),l=Object(h.a)(t.wallet.tokenAccounts,"".concat(e.reward.mintAddress,".tokenAccountAddress")),d=Object(h.a)(t.farm.stakeAccounts,"".concat(e.poolId,".stakeAccountAddress"));o.push({farmInfo:e,lpAccount:c,rewardAccount:l,infoAccount:d,amount:r})}));var r=Object(D.a)().toString();this.$notify.info({key:r,message:"Making transaction...",description:"",duration:0}),function(t,n,e){return S.apply(this,arguments)}(n,e,o).then((function(n){t.$notify.info({key:r,message:"Transaction has been sent",description:function(e){return e("div",["Confirmation is in progress.  Check your transaction on ",e("a",{attrs:{href:"".concat(t.url.explorer,"/tx/").concat(n),target:"_blank"}},"here")])}});t.$accessor.transaction.sub({txid:n,description:"Unstake all LP tokens"})})).catch((function(n){t.$notify.error({key:r,message:"Unstake all LP tokens failed",description:n.message})})).finally((function(){t.unstaking=!1}))},updateLiquids:function(){for(var t=[],n=0,e=Object.entries(this.wallet.tokenAccounts);n<e.length;n++){var r=Object(o.a)(e[n],2),c=r[0],l=r[1],d=Object(h.a)(this.liquidity.infos,c);if(d){var f=Object(k.a)(l.balance);f.isNullOrZero()||t.push({poolInfo:d,userLpBalance:f})}}this.liquids=t},remove:function(t,n){var e=this;this.removing=!0;var o=this.$web3,r=this.$wallet,c=Object(h.a)(this.wallet.tokenAccounts,"".concat(t.lp.mintAddress,".tokenAccountAddress")),l=Object(h.a)(this.wallet.tokenAccounts,"".concat(t.coin.mintAddress,".tokenAccountAddress")),d=Object(h.a)(this.wallet.tokenAccounts,"".concat(t.pc.mintAddress,".tokenAccountAddress")),f=Object(D.a)().toString();this.$notify.info({key:f,message:"Making transaction...",description:"",duration:0}),Object(U.j)(o,r,t,c,l,d,n.fixed()).then((function(o){e.$notify.info({key:f,message:"Transaction has been sent",description:function(t){return t("div",["Confirmation is in progress.  Check your transaction on ",t("a",{attrs:{href:"".concat(e.url.explorer,"/tx/").concat(o),target:"_blank"}},"here")])}});var r="Remove liquidity for ".concat(n.format()," ").concat(t.lp.name);e.$accessor.transaction.sub({txid:o,description:r})})).catch((function(t){e.$notify.error({key:f,message:"Remove liquidity failed",description:t.message})})).finally((function(){e.removing=!1}))}}}),x=(e(1360),e(1362),e(19)),component=Object(x.a)($,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"container"},[t._m(0),t._v(" "),e("div",{staticClass:"card"},[e("div",{staticClass:"card-body"},[e("p",[t._v("\n        Native SPL USDT has launched on Solana. As a result, SPL Wrapped USDT (WUSDT) liquidity in the RAY-WUSDT pool\n        must migrate to a new RAY-USDT pool. This tool simplifies the process.\n      ")]),t._v(" "),t.wallet.connected?e("div",[e("Steps",{attrs:{direction:"vertical","progress-dot":"",current:4}},[e("Step",[e("div",{attrs:{slot:"title"},slot:"title"},[t._v("Create USDT account")]),t._v(" "),e("div",{staticClass:"action",attrs:{slot:"description"},slot:"description"},[e("Button",{attrs:{ghost:"",loading:t.creating,disabled:t.creating||t.get(t.wallet.tokenAccounts,""+t.TOKENS.USDT.mintAddress)},on:{click:t.createUsdtAccount}},[t._v("\n                Create USDT Account\n              ")])],1)]),t._v(" "),e("Step",[e("div",{attrs:{slot:"title"},slot:"title"},[t._v("Unstake")]),t._v(" "),e("div",{staticClass:"action",attrs:{slot:"description"},slot:"description"},[t._v("\n              Staked LP tokens will be unstaked from legacy RAY-WUSDT pools\n\n              "),t._l(t.farms.filter((function(t){return 3===t.farmInfo.version&&"WUSDT"===t.farmInfo.lp.pc.symbol})),(function(n){return[e("Button",{key:n.farmInfo.lp.name,attrs:{ghost:"",loading:t.unstaking,disabled:t.unstaking},on:{click:function(e){t.unstakeWUSDT(n.farmInfo,n.depositBalance.fixed())}}},[t._v("\n                  Unstake\n                  "+t._s(n.depositBalance.format())+"\n                  "+t._s(n.farmInfo.lp.name)+"\n                ")])]}))],2)]),t._v(" "),e("Step",[e("div",{attrs:{slot:"title"},slot:"title"},[t._v("Remove liquidity")]),t._v(" "),e("div",{staticClass:"action",attrs:{slot:"description"},slot:"description"},[t._v("\n              Remove liquidity from legacy RAY-WUSDT pools\n\n              "),t._l(t.liquids.filter((function(t){return 3===t.poolInfo.version})),(function(n){return e("h6",{key:n.poolInfo.name,staticClass:"fs-container"},[e("span",[t._v(" "+t._s(n.userLpBalance.format())+" "+t._s(n.poolInfo.lp.name)+" ")]),t._v(" "),e("Button",{attrs:{ghost:"",loading:t.removing,disabled:0===t.liquids.length},on:{click:function(e){return t.remove(n.poolInfo,n.userLpBalance)}}},[t._v("\n                  Remove liquidity\n                ")])],1)}))],2)]),t._v(" "),e("Step",[e("div",{attrs:{slot:"title"},slot:"title"},[t._v("Unwrap")]),t._v(" "),e("div",{staticClass:"action",attrs:{slot:"description"},slot:"description"},[t._v("\n              Convert WUSDT to USDT. Converting takes time to process, please give it a couple minutes.\n\n              "),t.wallet.connected&&t.wallet.tokenAccounts[t.TOKENS.WUSDT.mintAddress]?e("h6",{staticClass:"fs-container"},[e("span",[t._v("WUSDT Balance")]),t._v(" "),e("span",[t._v("USDT Balance")])]):t._e(),t._v(" "),t.wallet.connected&&t.get(t.wallet.tokenAccounts,""+t.TOKENS.WUSDT.mintAddress)?e("h6",{staticClass:"fs-container"},[t.get(t.wallet.tokenAccounts,""+t.TOKENS.WUSDT.mintAddress)?e("span",[t._v("0")]):e("span",[t._v("\n                  "+t._s(t.get(t.wallet.tokenAccounts,""+t.TOKENS.WUSDT.mintAddress).balance.format())+"\n                ")]),t._v(" "),t.get(t.wallet.tokenAccounts,""+t.TOKENS.USDT.mintAddress)?e("span",[t._v("\n                  "+t._s(t.get(t.wallet.tokenAccounts,""+t.TOKENS.USDT.mintAddress).balance.format())+"\n                ")]):e("span",[t._v(" No USDT account yet ")])]):t._e(),t._v(" "),t.wallet.connected&&t.wallet.tokenAccounts[t.TOKENS.WUSDT.mintAddress]?e("Button",{attrs:{ghost:"",loading:t.unwraping,disabled:t.unwraping||0===t.wallet.tokenAccounts[t.TOKENS.WUSDT.mintAddress].balance.wei.toNumber()},on:{click:function(n){t.unwrapWUSDT(t.wallet.tokenAccounts[t.TOKENS.WUSDT.mintAddress].balance.fixed())}}},[t._v("\n                Unwrap all WUSDT\n              ")]):t._e()],1)]),t._v(" "),e("Step",[e("div",{attrs:{slot:"title"},slot:"title"},[t._v("Add liquidity to new RAY-USDT pool")]),t._v(" "),e("div",{staticClass:"action",attrs:{slot:"description"},slot:"description"},[t._v("\n              Continue earning RAY by adding liquidity to new pools, then staking LP tokens\n\n              "),e("Button",{attrs:{ghost:""},on:{click:function(n){return t.$router.push({path:"/liquidity/",query:{from:t.TOKENS.RAY.mintAddress,to:t.TOKENS.USDT.mintAddress}})}}},[t._v("\n                Add liquidity\n              ")])],1)])],1)],1):e("Button",{attrs:{size:"large",ghost:""},on:{click:t.$accessor.wallet.openModal}},[t._v("\n        Connect Wallet\n      ")])],1)]),t._v(" "),t._m(1),t._v(" "),e("div",{staticClass:"card"},[e("div",{staticClass:"card-body"},[t._m(2),t._v(" "),t.wallet.connected?e("div",[e("Steps",{attrs:{direction:"vertical","progress-dot":"",current:3}},[e("Step",[e("div",{attrs:{slot:"title"},slot:"title"},[t._v("Unstake")]),t._v(" "),e("div",{staticClass:"action",attrs:{slot:"description"},slot:"description"},[t._v("\n              All staked LP tokens will be unstaked from legacy pools\n\n              "),t._l(t.farms,(function(n){return[2===n.farmInfo.version?e("h6",{key:n.farmInfo.poolId},[t._v("\n                  "+t._s(n.depositBalance.format())+" "+t._s(n.farmInfo.lp.name)+"\n                ")]):t._e()]})),t._v(" "),e("Button",{attrs:{ghost:"",loading:t.unstaking,disabled:0===t.farms.filter((function(t){return 2===t.farmInfo.version})).length},on:{click:t.unstake}},[t._v("\n                Unstake all\n              ")])],2)]),t._v(" "),e("Step",[e("div",{attrs:{slot:"title"},slot:"title"},[t._v("Remove liquidity")]),t._v(" "),e("div",{staticClass:"action",attrs:{slot:"description"},slot:"description"},[t._v("\n              Remove liquidity for all legacy LP tokens\n\n              "),t._l(t.liquids,(function(n){return[2===n.poolInfo.version?e("h6",{key:n.poolInfo.name,staticClass:"fs-container"},[e("span",[t._v(" "+t._s(n.userLpBalance.format())+" "+t._s(n.poolInfo.lp.name)+" ")]),t._v(" "),e("Button",{attrs:{ghost:"",loading:t.removing,disabled:0===t.liquids.filter((function(t){return 2===t.poolInfo.version})).length},on:{click:function(e){return t.remove(n.poolInfo,n.userLpBalance)}}},[t._v("\n                    Remove liquidity\n                  ")])],1):t._e()]}))],2)]),t._v(" "),e("Step",[e("div",{attrs:{slot:"title"},slot:"title"},[t._v("Add liquidity to new pools")]),t._v(" "),e("div",{staticClass:"action",attrs:{slot:"description"},slot:"description"},[t._v("\n              Continue earning RAY by adding liquidity to new pools, then staking LP tokens.\n\n              "),e("Button",{attrs:{ghost:""},on:{click:function(n){return t.$router.push({path:"/liquidity/"})}}},[t._v("Go to DEX3 liquidity")])],1)])],1)],1):e("Button",{attrs:{size:"large",ghost:""},on:{click:t.$accessor.wallet.openModal}},[t._v("\n        Connect Wallet\n      ")])],1)])])}),[function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"page-head fs-container"},[e("span",{staticClass:"title"},[t._v("WUSDT Migration")])])},function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"page-head fs-container"},[e("span",{staticClass:"title"},[t._v("DEX2 to DEX3 Migration")])])},function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("p",[t._v("\n        Raydium is upgrading from Serum DEX2 to DEX3. As part of the upgrade, liquidity in legacy DEX2 pools must\n        migrate to new pools. This tool simplifies the process. For more info click\n        "),e("a",{attrs:{href:"https://raydium.gitbook.io/raydium/updates/upgrading-to-serum-dex3",target:"_blank"}},[t._v("here")]),t._v(".\n      ")])}],!1,null,"9476a1f8",null);n.default=component.exports}}]);